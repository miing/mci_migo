YUI.add("one-password-meter",function(e,t){"use strict";var n={height:function(e){return e.get("scrollHeight")+"px"},duration:.1,easing:"ease-out",on:{start:function(){var e=this.getStyle("overflow");e!=="hidden"&&(this.setStyle("overflow","hidden"),this._transitionOverflow=e)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}},r={height:0,duration:.1,easing:"ease-out",on:{start:function(){this.setStyle("overflow","hidden")}}},i,s=function(e){var t,n,r,i,s,o;if(e&&e.length>7){t=/[a-z]/.test(e)?1:0,n=/[A-Z]/.test(e)?1:0,r=/\d/.test(e)?1:0,i=/[\~\`\!\@\#\$\%\^\&\*\(\)\_\-\+\=\{\}\[\]\:\;\"\'\<\>\?\|\\\,\.\/]/.test(e)?1:0,s=t+n+r+i,o=t+n+r+i;if(o===0)throw new Error("Sum for >= 7 pwds cannot be 0")}else o=0;return o};i=e.Base.create("u1PasswordMeter",e.Widget,[],{_indicatorNode:null,initializer:function(){this.on("strengthChange",this._strengthChange,this),this.before("destroy",function(){var e=this.get("input"),t=this.get("boundingBox");t.insert(e,"before")})},_strengthChange:function(e){if(e.prevVal===e.newVal)return;var t=this.get("feedback")[e.newVal],n=this.get("boundingBox");this._removeStrengthClass(n),n.addClass(this.getClassName("strength",t.className)),this._indicatorNode.one("p").setContent(t.text)},_removeStrengthClass:function(e){var t=e.getAttribute("class");e.setAttribute("class",t.replace(/\w+-\w+-strength-\w+/,"")),e.setAttribute("class",e.getAttribute("class").replace(/\s{2,}/,""))},renderUI:function(){this._renderInput(),this._renderIndicator()},_renderInput:function(){var e=this.get("input"),t=this.get("boundingBox"),n=this.get("contentBox");return e.insert(t,e),n.append(e),e},_renderIndicator:function(){var t=e.Node.create("<div></div>");return t.addClass(this.getClassName("indicatorNode")),this.get("input").insert(t,"after"),t.setStyle("marginLeft",this.get("input").getComputedStyle("marginLeft")),t.setStyle("marginRight",this.get("input").getComputedStyle("marginRight")),t.setStyle("paddingLeft",this.get("input").getComputedStyle("paddingLeft")),t.setStyle("paddingRight",this.get("input").getComputedStyle("paddingRight")),t.setContent("<div></div><p></p>"),this._indicatorNode=t,t},bindUI:function(){this.get("input").on(["keyup","focus","blur"],this.syncUI,this)},syncUI:function(){this._updateStrength(),this._toggleIndicatorVisibility()},_toggleIndicatorVisibility:function(){var e=parseInt(this._indicatorNode.getComputedStyle("height"),10);this.get("input").get("value").length>3?e===0&&this._indicatorNode.transition(n):e>0&&this._indicatorNode.transition(r)},_updateStrength:function(){var e=this.get("input").get("value");this.set("strength",this.get("passwordChecker")(e))}},{ATTRS:{input:{value:null,setter:function(t){return e.one(t)}},strength:{value:null},passwordChecker:{value:s,validator:function(t){return e.Lang.isFunction(t)}},feedback:{value:[{className:"short",text:"Password is too short"},{className:"weak",text:"Strength: weak"},{className:"fair",text:"Strength: fair"},{className:"good",text:"Strength: good"},{className:"strong",text:"Strength: strong"}]}}}),i.HTML_PARSER={},i.NAME="passwordmeter",e.namespace("U1.Widgets").PasswordMeter=i},"@VERSION@",{requires:["base","widget","event-key","transition"]});
